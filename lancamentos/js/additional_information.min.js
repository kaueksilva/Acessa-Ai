!function(t){"use strict";function n(){e={body:t("body"),productAddInfoTexts:t(".productAdditionalInformation").find(":text"),productAddInfoSelects:t(".productAdditionalInformation").find("select"),productAddInfoTextAreas:t(".productAdditionalInformation").find("textarea")}}function o(){u.additionalInformation()}function a(){e.productAddInfoSelects.length<=0||e.productAddInfoSelects.on("change",function(n){var o=t(this).attr("id").replace("infoAdicional_","");n.preventDefault(),l(t(this).val()),InformacaoAdicional.principal(o)})}function i(){e.productAddInfoTexts.length<=0||(e.productAddInfoTexts.on("keyup",function(n){n.preventDefault(),f(t(this).val())}),e.productAddInfoTexts.on("blur",function(){var n=t(this).attr("id").replace("infoAdicional_","");InformacaoAdicional.principal(n)}))}function r(){e.productAddInfoTextAreas.length<=0||(e.productAddInfoTextAreas.on("keyup",function(n){n.preventDefault(),s(t(this).val()),p(t(this))}),e.productAddInfoTextAreas.on("blur",function(){var n=t(this).attr("id").replace("infoAdicional_","");InformacaoAdicional.principal(n)}))}function d(n){var o=t(this).find("#span_erro_carrinho:first"),a=!0;return t(".productAdditionalInformation").find("[required]").each(function(){""==t(this).val().trim()&&(t(this).val(""),t(this).attr("data-message")&&o.text(t(this).attr("data-message")),o.show(),a=!1)}),a||n.stopImmediatePropagation(),a}var e={},u={},c=0,l=function(t){m(t),InformacaoAdicional.calculaPrecoProduto(),ImagemInfoAdicional(t,c)},f=function(t){m(t),InformacaoAdicional.calculaPrecoProduto()},s=function(t){m(t),InformacaoAdicional.calculaPrecoProduto()},p=function(t){var n=parseInt(t.attr("data-maxlength"));if(t.val().length>n&&n>0)return void t.val(t.val().substr(0,n));var o=t.parents(".info-cadastrador-do-produto");o.find('[id^="restante_"]').text(parseInt(t.attr("data-maxlength"))-t.val().length)},m=function(n){if(document.getElementById("shippingSimulatorButton")){var o=t('input[name="loja"]').val(),a=jQuery("#shippingSimulatorButton").attr("data-url"),i=jQuery("#shippingSimulatorButton").attr("data-url").indexOf("id_produto="),r=jQuery("#shippingSimulatorButton").attr("data-url").indexOf("&use_api="),d=a.substring(i+11,r),e=o+"_AdditionalInformation_"+d;if(null==sessionStorage.getItem(e)){var u=jQuery("#shippingSimulatorButton").attr("data-url");sessionStorage.setItem(e,u)}jQuery("#shippingSimulatorButton").attr("data-url",sessionStorage.getItem(e)+n)}};u.additionalInformation=function(){a(),i(),r()},t(document).ready(function(){return n(),e.productAddInfoSelects.val()&&(application.variant.productAdditionalInformation=function(){l(e.productAddInfoSelects.val())}),e.body.on("submit","#form_comprar",d),jQuery(".productAdditionalInformation div input").on("keyup",function(){var t=jQuery(this).val(),n=jQuery(this).attr("maxlength");t&&n&&jQuery(this).val(t.substr(0,parseInt(n)))}),o()})}(jQuery);